<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>畫點東西：點、線、矩形、還有圓 | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.1.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../x-events/README.html" />
    
    
    <link rel="prev" href="../drawing-in-a-window/changing-the-attr-of-a-graphics-context.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-level="6.3" data-basepath=".." data-revision="1415502450786">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="basic-xcb-notion/README.html">
            
                
                    <a href="../basic-xcb-notion/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         基本的 XCB 概念
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="basic-xcb-notion/the-x-connection.html">
            
                
                    <a href="../basic-xcb-notion/the-x-connection.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         X 連接
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="basic-xcb-notion/the-xlib-killers.html">
            
                
                    <a href="../basic-xcb-notion/the-xlib-killers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         請求與回覆：殺掉 Xlib 效率的殺手
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="basic-xcb-notion/the-graphics-context.html">
            
                
                    <a href="../basic-xcb-notion/the-graphics-context.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         圖形上下文
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4" data-path="basic-xcb-notion/event.html">
            
                
                    <a href="../basic-xcb-notion/event.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                         事件
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="using-xcb-based-programs/README.html">
            
                
                    <a href="../using-xcb-based-programs/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         上基於 XCB 的程序
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="connection-to-an-X-server/README.html">
            
                
                    <a href="../connection-to-an-X-server/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         建立和關閉到 X 服務器的連接
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="checking-info-about-a-connection/README.html">
            
                
                    <a href="../checking-info-about-a-connection/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         檢查連接的基本信息
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="hello-world/README.html">
            
                
                    <a href="../hello-world/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         創建一個窗口——泥嚎，世界
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="drawing-in-a-window/README.html">
            
                
                    <a href="../drawing-in-a-window/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         在窗口內繪圖
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1" data-path="drawing-in-a-window/allocating-a-graphics-context.html">
            
                
                    <a href="../drawing-in-a-window/allocating-a-graphics-context.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                         給一個圖形上下文分配內存
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.2" data-path="drawing-in-a-window/changing-the-attr-of-a-graphics-context.html">
            
                
                    <a href="../drawing-in-a-window/changing-the-attr-of-a-graphics-context.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                         改變圖形上下文的屬性
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="6.3" data-path="drawing-in-a-window/drawing-primitives.html">
            
                
                    <a href="../drawing-in-a-window/drawing-primitives.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                         畫點東西：點、線、矩形、還有圓
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="x-events/README.html">
            
                
                    <a href="../x-events/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         X 事件
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1" data-path="x-events/registering-using-event-masks.html">
            
                
                    <a href="../x-events/registering-using-event-masks.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                         使用事件掩碼寄存事件類型
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.2" data-path="x-events/receiving-events.html">
            
                
                    <a href="../x-events/receiving-events.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                         接收事件：寫一個處理事件的循環
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.3" data-path="x-events/expose-events.html">
            
                
                    <a href="../x-events/expose-events.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                         暴露事件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.4" data-path="x-events/getting-user-input.html">
            
                
                    <a href="../x-events/getting-user-input.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.</b>
                        
                         取得用戶輸入
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.4.1" data-path="x-events/mouse-press-and-release-events.html">
            
                
                    <a href="../x-events/mouse-press-and-release-events.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.1.</b>
                        
                         鼠標的按下和放開事件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.4.2" data-path="x-events/movement-events.html">
            
                
                    <a href="../x-events/movement-events.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.2.</b>
                        
                         鼠標移動事件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.4.3" data-path="x-events/enter-and-leave-events.html">
            
                
                    <a href="../x-events/enter-and-leave-events.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.3.</b>
                        
                         鼠標指針進入和離開區域事件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.4.4" data-path="x-events/keyboard-focus.html">
            
                
                    <a href="../x-events/keyboard-focus.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.4.</b>
                        
                         鍵盤焦點
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.4.5" data-path="x-events/keyboard-press-and-release-events.html">
            
                
                    <a href="../x-events/keyboard-press-and-release-events.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.5.</b>
                        
                         鍵盤按鍵按下和放開事件
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7.5" data-path="x-events/example.html">
            
                
                    <a href="../x-events/example.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.</b>
                        
                         完全示例
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="text-and-fonts/README.html">
            
                
                    <a href="../text-and-fonts/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         操縱文字和字體
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" data-path="text-and-fonts/the-font-structure.html">
            
                
                    <a href="../text-and-fonts/the-font-structure.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                         字體結構
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2" data-path="text-and-fonts/opening-a-font.html">
            
                
                    <a href="../text-and-fonts/opening-a-font.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                         打開字體
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.3" data-path="text-and-fonts/assigning-a-font-to-a-graphic-context.html">
            
                
                    <a href="../text-and-fonts/assigning-a-font-to-a-graphic-context.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                         分配一個字體到圖形上下文
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.4" data-path="text-and-fonts/drawing-text-in-a-drawable.html">
            
                
                    <a href="../text-and-fonts/drawing-text-in-a-drawable.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                         在可繪圖的區域描繪字體
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5" data-path="text-and-fonts/example.html">
            
                
                    <a href="../text-and-fonts/example.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                         完全示例
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="windows-hierarchy/README.html">
            
                
                    <a href="../windows-hierarchy/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         窗口層次
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="9.1" data-path="windows-hierarchy/root-parent-and-child-windows.html">
            
                
                    <a href="../windows-hierarchy/root-parent-and-child-windows.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                         根、父和子窗口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9.2" data-path="windows-hierarchy/events-propagation.html">
            
                
                    <a href="../windows-hierarchy/events-propagation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                         事件傳輸
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="interacting-with-wm/README.html">
            
                
                    <a href="../interacting-with-wm/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         與窗口管理器的互動
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="10.1" data-path="interacting-with-wm/window-properties.html">
            
                
                    <a href="../interacting-with-wm/window-properties.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                         窗口屬性
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.2" data-path="interacting-with-wm/setting-the-window-name-and-icon-name.html">
            
                
                    <a href="../interacting-with-wm/setting-the-window-name-and-icon-name.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                         設置窗口和圖標的名稱
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.3" data-path="interacting-with-wm/setting-preferred-window-sizes.html">
            
                
                    <a href="../interacting-with-wm/setting-preferred-window-sizes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                         設置默認的窗口大小
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.4" data-path="interacting-with-wm/setting-miscellaneous-wm-hints.html">
            
                
                    <a href="../interacting-with-wm/setting-miscellaneous-wm-hints.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.4.</b>
                        
                         設置各種傳給窗口管理器的提示
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.5" data-path="interacting-with-wm/setting-apps-icon.html">
            
                
                    <a href="../interacting-with-wm/setting-apps-icon.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.5.</b>
                        
                         設置應用的圖標
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.6" data-path="interacting-with-wm/obeying-the-delete-window-protocol.html">
            
                
                    <a href="../interacting-with-wm/obeying-the-delete-window-protocol.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.6.</b>
                        
                         遵守刪除窗口的協議
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="simple-window-operations/README.html">
            
                
                    <a href="../simple-window-operations/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         簡易的窗口操作
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="11.1" data-path="simple-window-operations/mapping-and-unmapping.html">
            
                
                    <a href="../simple-window-operations/mapping-and-unmapping.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.</b>
                        
                         映射和反映射窗口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.2" data-path="simple-window-operations/configuring-a-window.html">
            
                
                    <a href="../simple-window-operations/configuring-a-window.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.2.</b>
                        
                         配置窗口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.3" data-path="simple-window-operations/moving-a-window-around-the-screen.html">
            
                
                    <a href="../simple-window-operations/moving-a-window-around-the-screen.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.3.</b>
                        
                         在屏幕中移動窗口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.4" data-path="simple-window-operations/resizing-a-window.html">
            
                
                    <a href="../simple-window-operations/resizing-a-window.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.4.</b>
                        
                         調整窗口大小
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.5" data-path="simple-window-operations/raise-and-lower.html">
            
                
                    <a href="../simple-window-operations/raise-and-lower.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.5.</b>
                        
                         調整窗口堆疊的命令：提升和下降
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.6" data-path="simple-window-operations/iconifying-and-de-iconifying.html">
            
                
                    <a href="../simple-window-operations/iconifying-and-de-iconifying.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.6.</b>
                        
                         最小化和取消最小化
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.7" data-path="simple-window-operations/getting-info-about-a-window.html">
            
                
                    <a href="../simple-window-operations/getting-info-about-a-window.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.7.</b>
                        
                         取得窗口信息
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="using-colors-to-paint-the-window/README.html">
            
                
                    <a href="../using-colors-to-paint-the-window/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         使用顏色來對窗口繪圖
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="12.1" data-path="using-colors-to-paint-the-window/color-maps.html">
            
                
                    <a href="../using-colors-to-paint-the-window/color-maps.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.1.</b>
                        
                         顏色映射
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.2" data-path="using-colors-to-paint-the-window/allocating-and-freeing-color-maps.html">
            
                
                    <a href="../using-colors-to-paint-the-window/allocating-and-freeing-color-maps.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.2.</b>
                        
                         分配和釋放顏色映射
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.3" data-path="using-colors-to-paint-the-window/allocating-and-freeing-color-entry.html">
            
                
                    <a href="../using-colors-to-paint-the-window/allocating-and-freeing-color-entry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.3.</b>
                        
                         分配和釋放顏色記錄
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.4" data-path="using-colors-to-paint-the-window/drawing-with-a-color.html">
            
                
                    <a href="../using-colors-to-paint-the-window/drawing-with-a-color.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.4.</b>
                        
                         使用顏色描繪
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="13" data-path="x-bitmaps-and-x-pixmap/README.html">
            
                
                    <a href="../x-bitmaps-and-x-pixmap/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         X 位圖和 XPM
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="13.1" data-path="x-bitmaps-and-x-pixmap/intro.html">
            
                
                    <a href="../x-bitmaps-and-x-pixmap/intro.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.1.</b>
                        
                         什麼是 X 位圖和 XPM ？
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13.2" data-path="x-bitmaps-and-x-pixmap/loading-a-bitmap-from-a-file.html">
            
                
                    <a href="../x-bitmaps-and-x-pixmap/loading-a-bitmap-from-a-file.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.2.</b>
                        
                         從文件讀取位圖
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13.3" data-path="x-bitmaps-and-x-pixmap/drawing-a-bitmap-in-a-window.html">
            
                
                    <a href="../x-bitmaps-and-x-pixmap/drawing-a-bitmap-in-a-window.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.3.</b>
                        
                         對窗口描繪位圖
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13.4" data-path="x-bitmaps-and-x-pixmap/creating-a-pixmap.html">
            
                
                    <a href="../x-bitmaps-and-x-pixmap/creating-a-pixmap.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.</b>
                        
                         創建 XPM
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13.5" data-path="x-bitmaps-and-x-pixmap/drawing-a-pixmap-in-a-window.html">
            
                
                    <a href="../x-bitmaps-and-x-pixmap/drawing-a-pixmap-in-a-window.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.5.</b>
                        
                         對窗口描繪 XPM
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13.6" data-path="x-bitmaps-and-x-pixmap/freeing-a-pixmap.html">
            
                
                    <a href="../x-bitmaps-and-x-pixmap/freeing-a-pixmap.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.6.</b>
                        
                         釋放 XPM
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="messing-with-the-mouse-cursor/README.html">
            
                
                    <a href="../messing-with-the-mouse-cursor/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         繪製鼠標指針
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="14.1" data-path="messing-with-the-mouse-cursor/creating-and-destroying-a-mouse-cursor.html">
            
                
                    <a href="../messing-with-the-mouse-cursor/creating-and-destroying-a-mouse-cursor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.1.</b>
                        
                         創建和銷毀鼠標指針
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.2" data-path="messing-with-the-mouse-cursor/setting-a-windows-mouse-cursor.html">
            
                
                    <a href="../messing-with-the-mouse-cursor/setting-a-windows-mouse-cursor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.2.</b>
                        
                         設置窗口的鼠標指針
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.3" data-path="messing-with-the-mouse-cursor/example.html">
            
                
                    <a href="../messing-with-the-mouse-cursor/example.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.3.</b>
                        
                         完全示例
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="15" data-path="traslation-of-xlib/README.html">
            
                
                    <a href="../traslation-of-xlib/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                         基礎 Xlib 函數和宏的轉譯
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_18">
                    
                        <h1 id="primitives">繪圖primitives：點、線、矩形、圓……</h1>
<p>在我們創建了一個圖形上下文後，我們就可以用這個圖形上下文來對窗口繪圖啦。在 XCB 函數中，這些函數叫做<strong>繪圖例程</strong>。讓我們看看它們是怎樣使用的吧。
想畫一個或若干個點，我們用：</p>
<pre><code>xcb_void_cookie_t xcb_poly_point (xcb_connection_t  *c,
                                  uint8_t            coordinate_mode,    /* coordinate mode 經常設置成 XCB_COORD_MODE_ORIGIN */
                                  xcb_drawable_t     drawable,
                                  xcb_gcontext_t     gc,
                                  uint32_t           points_len,         /* 點數 */
                                  const xcb_point_t *points);            /* 點的數組 */
</code></pre><p><code>coordinate_mode</code> 參數指定了 coordinate mode. 有效的值是：</p>
<ul>
<li>XCB_COORD_MODE_ORIGIN</li>
<li>XCB_COORD_MODE_PREVOIUS</li>
</ul>
<p>如果使用了 XCB_COORD_MODE_PREVOIUS ，那麼所有的點
<code>xcb_point_t</code> 這個類型是一個只含有兩個成員（點坐標）的結構：</p>
<pre><code>typedef struct {
    int16_t x;
    int16_t y;
} xcb_point_t
</code></pre><p>你將看到在 xponiter.c 中看到示例。TODO: 那麼幫我設置連接吧。（XCB 你看看你，十三年來都沒時間寫文檔嗎？）
用這個函數可以畫一條線：</p>
<pre><code>xcb_void_cookie_t xcb_poly_line (xcb_connection_t  *c,
                                 uint8_t            coordinate_mode,
                                 xcb_drawable_t     drawable,
                                 xcb_gcontext_t     gc,
                                 uint32_t           points_len,     /* 端點數 */
                                 const xcb_point_t *points);        /* 點的數組 */
</code></pre><p>這個函數將會在第一和第二個點之間畫一條線，同樣會第二和第三個點之間畫線，以此類推。
用這個函數來畫一條線段：</p>
<pre><code>xcb_void_cookie_t xcb_poly_segment (xcb_connection_t    *c,
                                    xcb_drawable_t       drawable,
                                    xcb_gcontext_t       gc,
                                    uint32_t             segments_len,  /* 線段數 */
                                    const xcb_segment_t *segments);     /* 線段的數組 */
</code></pre><p><code>xcb_segment_t</code> 這個類型是一個只含有四個成員（點一和點二的坐標）的結構：</p>
<pre><code>typedef struct {
    int16_t x1;
    int16_t y1;
    int16_t x2;
    int16_t y2;
} xcb_segment_t;
</code></pre><p>畫一個或多個矩形，使用這個函數：</p>
<pre><code>xcb_void_cookie_t xcb_poly_rectangle (xcb_connection_t      *c,
                                      xcb_drawable_t         drawable,
                                      xcb_gcontext_t         gc,
                                      uint32_t               rectangles_len, /* 矩形數量 */ 
                                      const xcb_rectangle_t *rectangles);    /* 矩形的數組 */
</code></pre><p><code>xcb_rectangle_t</code> 這個類型是一個含有四個成員（左上角坐標，寬和高）的數組：</p>
<pre><code>typedef struct {
    int16_t  x;
    int16_t  y;
    uint16_t width;
    uint16_t height;
} xcb_rectangle_t;
</code></pre><p>要畫一個或多個弧，用這個函數：</p>
<pre><code>xcb_void_cookie_t xcb_poly_arc (xcb_connection_t *c,
                                xcb_drawable_t    drawable,
                                xcb_gcontext_t    gc,
                                uint32_t          arcs_len,  /* 弧數 */
                                const xcb_arc_t  *arcs)      /* 弧的數組 */
</code></pre><p><code>xcb_arc_t</code> 這個類型是一個含有六個成員的結構：</p>
<pre><code>typedef struct {
    int16_t  x;
    int16_t  y;
    uint16_t width;
    uint16_t height;
    int16_t  angle1;  /* 弧起始角度 */
    int16_t  angle2;  /* 弧終止角度 */
} xcb_arc_t;
</code></pre><h4 id="note">Note</h4>
<p>弧的角度以角度的 1/64 作為單位，那麼要生成一個從 0 度開始， 90 度的角，那麼參數的設置是這樣的： angle1 = 0 ， angle2 = 90 &lt;&lt; 6。正向角是逆時針的，而反向角是順時針的。</p>
<p>這些幾何圖形都不會填充內部。那麼為了填充一個幾何圖形，就使用這個函數：</p>
<pre><code>xcb_void_cookie_t xcb_fill_poly (xcb_connection_t  *c,
                                 xcb_drawable_t     drawable,
                                 xcb_gcontext_t     gc,
                                 uint8_t            shape,
                                 uint8_t            coordinate_mode,
                                 uint32_t           points_len,
                                 const xcb_point_t *points)
</code></pre><p><code>shape</code> 參數可以幫助服務器提高性能，可用的參數是：</p>
<ul>
<li>XCB_POLY_SHAPE_COMPLEX</li>
<li>XCB_POLY_SHAPE_NONCONVEX</li>
<li>XCB_POLY_SHAPE_CONVEX</li>
</ul>
<p>填充一個或多個矩形，使用這個函數：</p>
<pre><code>xcb_void_cookie_t xcb_poly_fill_rectangle (xcb_connection_t      *c,
                                           xcb_drawable_t         drawable,
                                           xcb_gcontext_t         gc,
                                           uint32_t               rectangles_len,
                                           const xcb_rectangle_t *rectangles);
</code></pre><p>填充一條或多條弧，使用這個函數：</p>
<pre><code>xcb_void_cookie_t xcb_poly_fill_arc (xcb_connection_t *c,
                                     xcb_drawable_t    drawable,
                                     xcb_gcontext_t    gc,
                                     uint32_t          arcs_len,
                                     const xcb_arc_t  *arcs);
</code></pre><p>這裡有一個示例，它畫了四個點，一條線，兩條線段，兩個矩形和兩條弧。</p>
<p>TODO: 使用 screen-&gt;root_depth 作為 depth 的參數。</p>
<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

#include &lt;xcb/xcb.h&gt;

int
main()
{
  xcb_connection_t    *c;
  xcb_screen_t        *screen;
  xcb_drawable_t       win;
  xcb_gcontext_t       foreground;
  xcb_generic_event_t *e;
  uint32_t             mask = 0;
  uint32_t             values[2];

  /* 幾何對象 */
  xcb_point_t          points[] = {
    {10, 10},
    {10, 20},
    {20, 10},
    {20, 20}};

  xcb_point_t          polyline[] = {
    {50, 10],
    { 5, 20},
    {25,-20},
    {10, 10}};

  xcb_segment_t        segments[] = {
    {100, 10, 140, 30},
    {110, 25, 130, 60}};

  xcb_rectangle_t      rectangles[] = {
    { 10, 50, 40, 20},
    { 80, 50, 10, 40}};

  xcb_arc_t            arcs[] = {
    {10, 100, 60, 40, 0, 90 &lt;&lt; 6},
    {90, 100, 55, 40, 0, 270 &lt;&lt; 6}};

  c = xcb_connect (NULL, NULL);

  screen = xcb_setup_roots_iterator (xcb_get_setup (c)).data;

  win = screen-&gt;root;

  foreground = xcb_generate_id (c);
  mask = XCB_GC_FOREGROUND | XCB_GC_GRAPHICS_EXPOSURES;
  values[0] = screen-&gt;black_pixel;
  values[1] = 0;
  xcb_create_gc (c, foreground, win, mask, values);

  /* 取得窗口的 Id */
  win = xcb_generate_id(c);

  /* 創建窗口 */
  mask = XCB_CW_BACK_PIXEL | XCB_CW_EVENT_MASK;
  values[0] = screen-&gt;white_pixel;
  values[1] = XCB_EVENT_MASK_EXPOSURE;
  xcb_create_window (c,
                    XCB_COPY_FORM_PARENT,           /* 深度 */
                    win,
                    screen-&gt;root,
                    0, 0,                           /* x, y */
                    150, 150,                       /* 寬和高 */
                    10,                             /* 邊框寬 */
                    XCB_WINDOW_CLASS_INPUT_OUTPUT,  /* class */
                    screen-&gt;root_visual,            /* visual */
                    mask, values);                  /* 掩碼 */

  /* 映射窗口 */
  xcb_map_window (c, win);

  /* 清空請求 */
  xcb_flush (c);

  while ((e = xcb_wait_for_event (c))) {
    switch (e-&gt;response_type &amp; ~0x80) {
    case XCB_EXPOSE:
      /* 畫點 */
      xcb_poly_point (x, XCB_COORD_MODE_ORIGIN, win, foreground, 4, points);

      /* 畫線 */
      xcb_poly_line (c, XCB_COORD_MODE_PREVOIUS, win, foreground, 4, polyline);

      /* 畫線段 */
      xcb_poly_segment (c, win, foreground, 2, segments);

      /* 畫矩形 */
      xcb_poly_rectangle (c, win, foreground, 2, rectangles);

      /* 畫弧 */
      xcb_poly_arc (c, win, foreground, 2, arcs);

      /* 清空請求 */
      xcb_flush (c);
      break;
    }
    default: {
      /* 未知類型事件，忽視它 */
      break;
    }
    }
    /* 釋放通用事件 */
    free (e);
  }

  return 0;
}
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../drawing-in-a-window/changing-the-attr-of-a-graphics-context.html" class="navigation navigation-prev " aria-label="Previous page: 改變圖形上下文的屬性"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../x-events/README.html" class="navigation navigation-next " aria-label="Next page: X 事件"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
